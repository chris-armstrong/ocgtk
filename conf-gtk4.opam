opam-version: "2.0"
version: "4.0"
synopsis: "Virtual package relying on GTK4 system installation"
description:
  "This package can only be installed if GTK 4 is installed on the system."
maintainer: "lablgtk@math.nagoya-u.ac.jp"
authors: ["The LablGTK team"]
license: "LGPL-2.1-or-later WITH OCaml-LGPL-linking-exception"
homepage: "https://github.com/chris-armstrong/lablgtk"
bug-reports: "https://github.com/chris-armstrong/lablgtk/issues"

# System package dependencies for GTK4
depexts: [
  # Debian/Ubuntu
  ["libgtk-4-dev"] {os-family = "debian"}

  # Fedora/RHEL/CentOS
  ["gtk4-devel"] {os-distribution = "fedora"}
  ["gtk4-devel"] {os-distribution = "rhel"}
  ["gtk4-devel"] {os-distribution = "centos"}

  # Arch Linux
  ["gtk4"] {os-distribution = "arch"}

  # Alpine Linux
  ["gtk4.0-dev"] {os-distribution = "alpine"}

  # macOS via Homebrew
  ["gtk4"] {os = "macos" & os-distribution = "homebrew"}

  # macOS via MacPorts
  ["gtk4"] {os = "macos" & os-distribution = "macports"}

  # Windows via mingw
  ["mingw-w64-x86_64-gtk4"] {os = "win32" & os-distribution = "cygwinports"}
]

# Check that pkg-config can find gtk4
build: [
  ["pkg-config" "--print-errors" "--exists" "gtk4"]
]

flags: conf
